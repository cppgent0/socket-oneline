#! /bin/bash

OVERALLRC=0

# --------------------
function main_setup() {
  CW_DIR="$(pwd)"
  OUT_DIR="${CW_DIR}/out"
  mkdir -p "${OUT_DIR}"

  # initialize the output file
  OUTFILE="${OUT_DIR}/socket_oneline.txt"
  echo | tee "${OUTFILE}"
}

# --------------------
# run setup
# sets OVERALLRC to the return code
function run_setup() {
  rm -f "${OUT_DIR}/*.txt"

  source set_env.sh
}

# --------------------
# run report
# sets OVERALLRC to the return code
function run_it() {
  $pyexe sample/main.py
}

# ---- Main

main_setup
run_setup
run_it

echo "     overall rc $OVERALLRC : ${tag}" | tee -a "${OUTFILE}"

exit $OVERALLRC
